<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PDF Viewer | Xnuvers007</title>
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; frame-src https://docs.google.com; connect-src 'self' https:;">
<style>
  :root {
    --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --secondary-gradient: linear-gradient(135deg, #ff6b6b, #ee5a24);
    --success-color: #27ae60;
    --error-color: #e74c3c;
    --warning-color: #f39c12;
    --text-dark: #2c3e50;
    --text-light: #7f8c8d;
    --glass-bg: rgba(255, 255, 255, 0.15);
    --glass-border: rgba(255, 255, 255, 0.2);
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: var(--primary-gradient);
    background-attachment: fixed;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    color: var(--text-dark);
    padding: 20px;
    position: relative;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    pointer-events: none;
    z-index: -1;
  }

  .header {
    text-align: center;
    margin-bottom: 2rem;
    position: relative;
  }

  .logo-container {
    width: 100px;
    height: 100px;
    margin: 0 auto 20px;
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    animation: float 6s ease-in-out infinite;
    position: relative;
    overflow: hidden;
  }

  .logo-container::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transform: rotate(45deg);
    animation: shimmer 3s infinite;
  }

  .logo-container::after {
    content: 'üìÑ';
    font-size: 42px;
    z-index: 1;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  @keyframes shimmer {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
  }

  h1 {
    color: white;
    font-size: clamp(24px, 4vw, 42px);
    font-weight: 700;
    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    background: linear-gradient(135deg, #ffffff, #f8f9fa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 10px;
    letter-spacing: -0.5px;
  }

  .subtitle {
    color: rgba(255, 255, 255, 0.8);
    font-size: 16px;
    font-weight: 400;
    margin-bottom: 0;
  }

  .input-container {
    position: relative;
    width: 100%;
    max-width: 700px;
    margin-bottom: 20px;
  }

  .input-wrapper {
    position: relative;
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    padding: 4px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .input-wrapper:focus-within {
    transform: translateY(-2px);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    border-color: rgba(255, 255, 255, 0.4);
  }

  input[type="url"] {
    width: 100%;
    padding: 18px 24px;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    outline: none;
    color: var(--text-dark);
    font-weight: 500;
  }

  input[type="url"]::placeholder {
    color: var(--text-light);
    font-weight: 400;
  }

  input[type="url"]:focus {
    background: rgba(255, 255, 255, 0.95);
    box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.05);
  }

  .button-container {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 30px;
  }

  button {
    padding: 16px 32px;
    font-size: 16px;
    font-weight: 600;
    border: none;
    border-radius: 12px;
    background: var(--primary-gradient);
    color: white;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    min-width: 140px;
  }

  button:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
  }

  button:active {
    transform: translateY(-1px);
  }

  button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s;
  }

  button:hover::before {
    left: 100%;
  }

  .clear-btn {
    background: var(--secondary-gradient);
    box-shadow: 0 10px 25px rgba(238, 90, 36, 0.3);
  }

  .clear-btn:hover {
    box-shadow: 0 15px 35px rgba(238, 90, 36, 0.4);
  }

  #pdfContainer {
    width: 95vw;
    max-width: 1200px;
    height: 80vh;
    min-height: 500px;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.2);
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    position: relative;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0;
    transform: translateY(20px);
  }

  #pdfContainer.show {
    opacity: 1;
    transform: translateY(0);
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
    border-radius: 16px;
  }

  .message {
    margin-top: 20px;
    padding: 16px 24px;
    border-radius: 12px;
    font-weight: 500;
    text-align: center;
    max-width: 600px;
    backdrop-filter: blur(20px);
    border: 1px solid transparent;
    transition: all 0.3s ease;
    opacity: 0;
    transform: translateY(10px);
  }

  .message.show {
    opacity: 1;
    transform: translateY(0);
  }

  .error {
    background: rgba(231, 76, 60, 0.15);
    color: #c0392b;
    border-color: rgba(231, 76, 60, 0.3);
  }

  .success {
    background: rgba(39, 174, 96, 0.15);
    color: #27ae60;
    border-color: rgba(39, 174, 96, 0.3);
  }

  .warning {
    background: rgba(243, 156, 18, 0.15);
    color: #d68910;
    border-color: rgba(243, 156, 18, 0.3);
  }

  .loading {
    background: rgba(52, 152, 219, 0.15);
    color: #2980b9;
    border-color: rgba(52, 152, 219, 0.3);
  }

  .loading::after {
    content: '';
    width: 20px;
    height: 20px;
    border: 2px solid currentColor;
    border-top: 2px solid transparent;
    border-radius: 50%;
    display: inline-block;
    margin-left: 10px;
    animation: spin 1s linear infinite;
    vertical-align: middle;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  .feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin: 40px 0;
    max-width: 800px;
    width: 100%;
  }

  .feature-card {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    transition: transform 0.3s ease;
    color: white;
  }

  .feature-card:hover {
    transform: translateY(-5px);
  }

  .feature-icon {
    font-size: 32px;
    margin-bottom: 12px;
    display: block;
  }

  .feature-title {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 8px;
  }

  .feature-desc {
    font-size: 14px;
    opacity: 0.8;
    line-height: 1.4;
  }

  @media (max-width: 768px) {
    .button-container {
      flex-direction: column;
      align-items: center;
    }
    
    button {
      width: 100%;
      max-width: 300px;
    }
    
    #pdfContainer {
      width: 98vw;
      height: 70vh;
    }
    
    .feature-grid {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .input-container {
      max-width: 100%;
    }
  }

  @media (max-width: 480px) {
    body {
      padding: 15px;
    }
    
    .logo-container {
      width: 80px;
      height: 80px;
    }
    
    .logo-container::after {
      font-size: 32px;
    }
    
    input[type="url"] {
      padding: 16px 20px;
      font-size: 15px;
    }
    
    button {
      padding: 14px 28px;
      font-size: 15px;
    }
  }
</style>
</head>
<body>
<div class="header">
  <div class="logo-container"></div>
  <h1>PDF Viewer Created by Xnuvers007</h1>
  <p class="subtitle">Powerful & Secure Document Viewer</p>
</div>

<div class="input-container">
  <div class="input-wrapper">
    <input type="url" id="pdfUrl" placeholder="Tempel URL file PDF di sini..." required autocomplete="off" spellcheck="false" />
  </div>
</div>

<div class="button-container">
  <button onclick="loadPdf()">
    <span>üìÑ Tampilkan PDF</span>
  </button>
  <button class="clear-btn" onclick="clearViewer()">
    <span>üóëÔ∏è Bersihkan</span>
  </button>
</div>

<div class="feature-grid">
  <div class="feature-card">
    <div class="feature-icon">üîí</div>
    <div class="feature-title">Keamanan Tinggi</div>
    <div class="feature-desc">Dilindungi dari XSS dan serangan injeksi lainnya</div>
  </div>
  <div class="feature-card">
    <div class="feature-icon">‚ö°</div>
    <div class="feature-title">Performa Cepat</div>
    <div class="feature-desc">Loading yang optimal dengan caching pintar</div>
  </div>
  <div class="feature-card">
    <div class="feature-icon">üì±</div>
    <div class="feature-title">Responsif</div>
    <div class="feature-desc">Bekerja sempurna di semua perangkat</div>
  </div>
  <div class="feature-card">
    <div class="feature-icon">üåê</div>
    <div class="feature-title">Universal</div>
    <div class="feature-desc">Mendukung berbagai format dokumen</div>
  </div>
</div>

<div id="pdfContainer">
  <iframe id="pdfFrame" title="PDF Viewer" sandbox="allow-scripts allow-same-origin allow-popups allow-forms"></iframe>
</div>

<div class="message" id="messageBox"></div>

<script>
  'use strict';
  
  const SecurityUtils = {
    sanitizeUrl: function(url) {
      if (typeof url !== 'string') return '';
      
      const sanitized = url.trim()
        .replace(/[<>'"]/g, '')
        .replace(/javascript:/gi, '')
        .replace(/vbscript:/gi, '')
        .replace(/data:/gi, '')
        .replace(/file:/gi, '');
      
      return sanitized;
    },
    
    validateUrl: function(url) {
      if (!url || typeof url !== 'string') return false;
      
      try {
        const urlObj = new URL(url);
        return ['http:', 'https:'].includes(urlObj.protocol);
      } catch (e) {
        return false;
      }
    },
    
    isPotentialPdf: function(url) {
      const lowerUrl = url.toLowerCase();
      return lowerUrl.includes('.pdf') || 
             lowerUrl.includes('pdf') || 
             lowerUrl.includes('document') ||
             lowerUrl.includes('doc');
    }
  };

  const UI = {
    elements: {
      urlInput: null,
      container: null,
      iframe: null,
      messageBox: null
    },
    
    init: function() {
      this.elements.urlInput = document.getElementById('pdfUrl');
      this.elements.container = document.getElementById('pdfContainer');
      this.elements.iframe = document.getElementById('pdfFrame');
      this.elements.messageBox = document.getElementById('messageBox');
      
      this.elements.urlInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          loadPdf();
        }
      });
      
      this.elements.urlInput.addEventListener('input', () => {
        this.clearMessage();
      });
    },
    
    showMessage: function(text, type = 'error') {
      const messageBox = this.elements.messageBox;
      messageBox.textContent = text;
      messageBox.className = `message ${type}`;
      
      messageBox.offsetHeight;
      messageBox.classList.add('show');
      
      if (type === 'success') {
        setTimeout(() => this.clearMessage(), 5000);
      }
    },
    
    clearMessage: function() {
      const messageBox = this.elements.messageBox;
      messageBox.classList.remove('show');
      setTimeout(() => {
        messageBox.textContent = '';
        messageBox.className = 'message';
      }, 300);
    },
    
    showContainer: function() {
      this.elements.container.style.display = 'block';
      this.elements.container.offsetHeight;
      this.elements.container.classList.add('show');
    },
    
    hideContainer: function() {
      this.elements.container.classList.remove('show');
      setTimeout(() => {
        this.elements.container.style.display = 'none';
        this.elements.iframe.src = '';
      }, 500);
    }
  };

  function loadPdf() {
    const urlInput = UI.elements.urlInput;
    const rawUrl = urlInput.value;
    
    UI.clearMessage();
    UI.hideContainer();
    
    if (!rawUrl) {
      UI.showMessage('‚ùå Mohon masukkan URL file PDF.', 'error');
      urlInput.focus();
      return;
    }
    
    const sanitizedUrl = SecurityUtils.sanitizeUrl(rawUrl);
    if (!sanitizedUrl) {
      UI.showMessage('‚ùå URL mengandung karakter yang tidak diizinkan.', 'error');
      return;
    }
    
    if (!SecurityUtils.validateUrl(sanitizedUrl)) {
      UI.showMessage('‚ùå Format URL tidak valid. Gunakan URL yang dimulai dengan http:// atau https://', 'error');
      return;
    }
    
    if (!SecurityUtils.isPotentialPdf(sanitizedUrl)) {
      UI.showMessage('‚ö†Ô∏è URL ini mungkin bukan file PDF. Tetap melanjutkan...', 'warning');
    }
    
    UI.showMessage('üîÑ Memuat dokumen PDF...', 'loading');
    
    try {
      const encodedUrl = encodeURIComponent(sanitizedUrl);
      const viewerUrl = `https://docs.google.com/gview?embedded=true&url=${encodedUrl}`;
      
      const iframe = UI.elements.iframe;
      iframe.src = viewerUrl;
      
      iframe.onload = function() {
        UI.clearMessage();
        UI.showMessage('‚úÖ PDF berhasil dimuat!', 'success');
        UI.showContainer();
      };
      
      iframe.onerror = function() {
        UI.showMessage('‚ùå Gagal memuat PDF. Periksa URL dan coba lagi.', 'error');
        UI.hideContainer();
      };
      
      setTimeout(() => {
        if (UI.elements.messageBox.classList.contains('loading')) {
          UI.clearMessage();
          UI.showContainer();
        }
      }, 5000);
      
    } catch (error) {
      console.error('Error loading PDF:', error);
      UI.showMessage('‚ùå Terjadi kesalahan saat memuat PDF.', 'error');
    }
  }

  function clearViewer() {
    UI.elements.urlInput.value = '';
    UI.hideContainer();
    UI.clearMessage();
    UI.elements.urlInput.focus();
  }

  document.addEventListener('DOMContentLoaded', function() {
    UI.init();
    
    setTimeout(() => {
      UI.elements.urlInput.focus();
    }, 500);
  });

  document.addEventListener('contextmenu', function(e) {
    if (e.target.tagName === 'IFRAME') {
      e.preventDefault();
    }
  });

  document.addEventListener('visibilitychange', function() {
    if (document.hidden) {
      console.log('Page hidden - pausing operations');
    } else {
      console.log('Page visible - resuming operations');
    }
  });
</script>

</body>
</html>
